<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Manas">
<meta name="dcterms.date" content="2024-02-26">
<meta name="description" content="AI Art Critique Experiment: Deep Analysis from Visuals Alone.">

<title>Knowledge Legos - GPT as an Art Critic</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Knowledge Legos</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">GPT as an Art Critic</h1>
                  <div>
        <div class="description">
          AI Art Critique Experiment: Deep Analysis from Visuals Alone.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Art Analysis</div>
                <div class="quarto-category">Visual Studies</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Manas </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 26, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>New experiment: testing an AI’s ability to describe and interpret a range of artwork, pushing it beyond simple recognition to uncover deeper narratives and emotions within each piece. For different types of art, I’m curious to see how the AI connects with human expressions captured in visuals. Join as I will explore what GPT-4 can really tell us about the art pieces it ‘views’.</p>
<section id="step-1-selection-of-artworks" class="level2">
<h2 class="anchored" data-anchor-id="step-1-selection-of-artworks">Step 1: Selection of Artworks</h2>
<p>I asked ChatGPT to give me three pieces of art that included diverse styles and periods. It suggested:</p>
<p><strong>Starry Night</strong> - Vincent Van Gogh, <em>Post-Impressionism</em><br>
<strong>The Persistance of Memory</strong> – Salvador Dali, <em>Surrealism</em><br>
<strong>Untitled</strong> - Jean Michael Basquiat, <em>Neo-expressionism</em></p>
<p>My two prompts, in order to not allow the GPT to simply look up the piece in its database to provide info, are</p>
<p>Describe the elements and details visible in the image this art piece and what emotions and themes do you think the artist is trying to convey?.</p>
<p>Let’s start:</p>
</section>
<section id="starry-night" class="level2">
<h2 class="anchored" data-anchor-id="starry-night">Starry Night</h2>
<p><img src="star.png" class="img-fluid"></p>
<p><strong>GPT’s Description</strong>: This image displays a painting featuring a vibrant night sky filled with swirling clouds, bright stars, and a glowing crescent moon. In the foreground, there is a tall, dark cypress tree that stands out against the sky, drawing the viewer’s eye upward. Below, a quaint village rests under the celestial dance, with peaceful houses, rolling hills, and a church spire that echoes the verticality of the cypress tree. The brushwork is expressive and dynamic, with thick impasto, which adds texture and a sense of movement. The color palette is dominated by shades of blue and yellow, creating a stark contrast between the cool night and the warm, lively stars. The artist seems to convey a mix of emotions and themes through this piece. The tumultuous sky could suggest a feeling of unrest or turmoil, while the stars and moon provide a sense of light and hope amidst the darkness. There is a dreamlike quality to the scene, evoking wonder and awe at the vastness and beauty of the night sky. The painting could also reflect on the eternal nature of the cosmos in contrast with the serene and unchanged village, a juxtaposition of the infinite and the temporal. This artwork is often seen as a symbol of the artist’s internal feelings and struggles, as well as a testament to the power of nature and the universe.</p>
<p><em>Without technically knowing which painting I was showing it, the GPT nails the essence of “Starry Night,” emphasizing its swirling skies and vibrant contrasts, and overall seeming to capture van Gogh’s emotional depth. It suggests the painting as a dance between turmoil and tranquility, which is true and ties van Gogh’s personal struggles to the allure of the night sky.</em></p>
<p>Now, I am going to put its description through an AI Art Professor. Here’s my prompt:</p>
<p><strong>You are an art professor. Your students see paintings with no backstory and try to describe what is happening in the painting as well as the emotions conveyed. You will shortly and cohesively assess your students’ analysis and give a grade for accuracy.</strong></p>
<p>Let’s see what happens:</p>
<p><strong>AI Prof</strong>: The student’s analysis of “Starry Night” by Vincent van Gogh is insightful and demonstrates a deep engagement with the visual and thematic elements of the painting. The description accurately captures the painting’s key components: the swirling night sky, the bright stars and crescent moon, the prominent cypress tree, and the tranquil village. The mention of the expressive brushwork and the use of color to convey emotion and contrast between the celestial and the earthly is particularly astute.</p>
<p>The interpretation of the emotions and themes within the painting is thoughtful and well-articulated. The student correctly identifies the potential representation of turmoil and hope, the dreamlike atmosphere, and the contemplation of the infinite versus the temporal. Additionally, recognizing the painting as a reflection of the artist’s internal feelings and struggles, as well as a commentary on the power of nature and the universe, shows a nuanced understanding of how “Starry Night” can be seen as both a personal and universal statement.</p>
<p>Grade: 95/100</p>
<p>The analysis is comprehensive, accurately describing the painting’s visual elements and thoughtfully interpreting its emotional depth and thematic content. The student has successfully connected the technical aspects of van Gogh’s style with the broader existential questions the painting raises, demonstrating both a keen eye for detail and an ability to engage with complex ideas.</p>
<p><em>Great job by GPT. Starting off with a 4.0 GPA. Next, ‘The Persistance of Memory.’</em></p>
</section>
<section id="the-persistance-of-memory" class="level2">
<h2 class="anchored" data-anchor-id="the-persistance-of-memory">The Persistance of Memory</h2>
<p><img src="mem.png" class="img-fluid"></p>
<p><strong>GPT’s Description</strong>: The image displays a surreal landscape, characteristic of Salvador Dalí’s iconic style. There are several melting clocks draped over different surfaces, such as a tree branch, the edge of a table or platform, and what appears to be a sleeping face molded into an amorphous shape. In the background, there’s a barren landscape with cliffs under a darkening sky transitioning from sunset hues to a deep blue. The sea is visible on the horizon. The various elements, such as the melting clocks, suggest themes of the fluid nature of time and the insignificance of temporal concerns in the dream world or in the scope of the unconscious mind. The barren landscape and twilight sky may evoke feelings of isolation, tranquility, or impending change. The artist seems to be challenging the viewer’s perception of reality and time. The persistence of memory, as one theme suggested by the melting clocks, could signify the relativity and subjective experience of time as opposed to its conventional, linear measurement. There is also a sense of decay and transformation, which might imply that all things are transient and subject to change, regardless of their perceived solidity. Emotionally, the piece has an eerie, dream-like quality. It might provoke contemplation, unease, fascination, or introspection in the viewer, depending on their personal response to such a surreal and thought-provoking scene.</p>
<p><em>Interesting, it recognized the style was Dali’s. Again, it does a great job describing the work. Let’s see what the professor says.</em></p>
<p><strong>AI Prof</strong>: The student’s analysis of Salvador Dalí’s “The Persistence of Memory” is both accurate and perceptive, demonstrating an excellent understanding of the painting’s visual elements and underlying themes. The description of the surreal landscape, with its melting clocks and the amorphous shapes, captures the essence of Dalí’s work and his exploration of the dream world. The student’s observation of the setting—highlighting the barren landscape, the cliffs, and the transition from sunset hues to a deep blue sky—effectively sets the scene for the viewer.</p>
<p>The interpretation of themes such as the fluidity of time, the insignificance of temporal concerns within dreams or the unconscious mind, and the challenge to conventional perceptions of reality is insightful. The student adeptly identifies the central motif of the melting clocks as a representation of the subjective and relative nature of time, a key concept in Dalí’s work. The mention of decay and transformation, and the suggestion that the painting reflects on the transience of all things, shows a deep engagement with the painting’s existential dimensions.</p>
<p>The analysis also thoughtfully considers the emotional impact of the painting, recognizing its eerie, dream-like quality and potential to provoke a range of responses from contemplation to unease. This acknowledges the personal and subjective nature of art interpretation, which is particularly relevant in the context of surrealism.</p>
<p>Grade: 95/100</p>
<p>The student’s analysis is comprehensive and insightful, effectively combining a detailed description of the painting’s visual elements with a nuanced interpretation of its themes and emotional resonance. The analysis shows a sophisticated understanding of Dalí’s artistic intentions and the broader implications of his work, demonstrating both a keen eye for detail and an ability to engage with complex conceptual ideas.</p>
<p><em>Still, a 4.0! I have a feeling it recognizes the images somehow, so it is able to give super accurate descriptions. At the end, I’m going to ask the AI Prof to get more granular to crown a winning painting and give an overall grade.</em></p>
</section>
<section id="untitled" class="level2">
<h2 class="anchored" data-anchor-id="untitled">Untitled</h2>
<p><img src="unt.jpg" class="img-fluid"></p>
<p><strong>GPT’s Description</strong>: The image depicts a vibrant and complex painting that features an abstract representation of a human face. The artwork, characterized by its use of bold colors and intense brush strokes, includes a mix of elements that appear to overlay one another, giving the piece a sense of depth and texture. Diverse colors such as yellows, blues, reds, and blacks create a fragmented visage with different parts of the face represented in a disjointed fashion, contributing to a feeling of abstraction. The face has multiple eyes and overlapping lines that might suggest a feeling of being fractured or divided. Motifs that resemble both skeletal and muscular structures are apparent, giving an impression of an x-ray or an anatomical study. The painting includes textual elements, possibly signatures or short messages, that add to the chaotic and expressive nature of the work. This style of art, reminiscent of certain expressionist or modernist influences, could be seen as an exploration of the human condition, identity, or psychological states. The use of disarticulated and reconstructed facial features might convey emotions of confusion, angst, or a search for personal identity. It seems that the artist might be trying to express complex and possibly conflicting emotions through this piece. The chaotic layering and bright, clashing colors could represent the turmoil of the inner self, societal pressures, or the multifaceted nature of human perception and experience. Overall, the artwork encapsulates a sense of intensity and raw emotion, inviting viewers to interpret the piece through their own emotional responses.</p>
<p><em>I don’t know too much about the backstory and real meaning behind this painting, so let’s so what the Prof says.</em></p>
<p><strong>AI Prof</strong>: The student’s analysis of the untitled piece by Jean-Michel Basquiat is insightful and demonstrates a good understanding of Basquiat’s style and thematic concerns. Basquiat’s work is known for its raw intensity, complex layering, and the integration of text and imagery to explore deep themes of identity, race, socio-political issues, and the human condition. The student’s description captures the essence of Basquiat’s artistic approach with attention to the vibrant use of color, intense brushwork, and the abstract representation of a human face.</p>
<p>The observation of the painting’s fragmented and disjointed aspects, along with the incorporation of skeletal and muscular motifs, aligns well with Basquiat’s interest in anatomical drawings and his ability to convey complex emotional and psychological states through his art. The mention of textual elements as part of the chaotic and expressive nature of the work is also accurate, as Basquiat often included words and phrases to enhance the meaning and impact of his images.</p>
<p>The interpretation that the painting explores themes such as the human condition, identity, and psychological states is perceptive. Basquiat’s art frequently delved into these areas, using his unique visual language to comment on his own identity and broader societal issues. The student’s analysis of the potential emotions conveyed—confusion, angst, a search for personal identity—along with the suggestion that the piece reflects on the turmoil of the inner self and societal pressures, shows a deep engagement with the possible meanings behind Basquiat’s work.</p>
<p>The analysis recognizes the intensity and raw emotion of Basquiat’s art and correctly identifies the invitation for viewers to engage with the piece on a personal level, interpreting it through their own experiences and emotional responses.</p>
<p>Grade: 93/100</p>
<p>The student’s analysis is thorough and demonstrates a keen insight into Basquiat’s artistic intentions and the thematic content of his work. While the interpretation is well-founded, offering slightly more specific examples of how Basquiat’s themes relate to broader cultural or personal narratives could enhance the analysis. Nonetheless, it is a thoughtful and well-articulated assessment of Basquiat’s untitled piece.</p>
<p><strong>Me</strong>: Now, get more granular to crown a winning analysis and give an overall specific grade to each one.</p>
<p><strong>AI Prof</strong>: To crown a winning analysis among the three discussed (Vincent van Gogh’s “Starry Night”, Salvador Dalí’s “The Persistence of Memory”, and Jean-Michel Basquiat’s untitled piece), we’ll assess each analysis based on depth, insightfulness, understanding of the artist’s intentions, ability to connect with broader themes, and the coherence of the argument presented. Here are the more granular assessments and overall specific grades:</p>
<p>Vincent van Gogh’s “Starry Night” Analysis Depth of Visual Description: Excellent. The student provides a detailed description of the painting’s key visual elements. Insightfulness and Interpretation: Very high. The analysis thoughtfully interprets the emotional and thematic content. Connection with Broader Themes: Strong. Makes clear connections between visual elements and broader existential themes. Coherence: The argument is cohesive and well-structured. Overall Specific Grade: 95/100</p>
<p>Salvador Dalí’s “The Persistence of Memory” Analysis Depth of Visual Description: Excellent. Accurately captures the surreal landscape and key components of Dalí’s work. Insightfulness and Interpretation: Very high. Provides a nuanced understanding of the themes of time and reality. Connection with Broader Themes: Strong. Effectively links Dalí’s personal symbols with universal concepts of time and existence. Coherence: The analysis is coherent, with a clear progression of ideas. Overall Specific Grade: 95/100</p>
<p>Jean-Michel Basquiat’s Untitled Piece Analysis Depth of Visual Description: Good. Captures the essence of Basquiat’s style but could delve deeper into specific elements. Insightfulness and Interpretation: High. Offers a solid interpretation of potential themes of identity and psychological states. Connection with Broader Themes: Good. Identifies relevant themes but could benefit from more direct connections to cultural or personal narratives. Coherence: The argument is mostly cohesive, though slightly more focus on unifying the analysis could enhance it. Overall Specific Grade: 93/100</p>
<p>Crowning a Winning Analysis:</p>
<p>The analyses of “Starry Night” and “The Persistence of Memory” are tied in their overall excellence, both receiving a 95/100. They demonstrate a deep understanding of the artworks, articulate the emotional and thematic depth effectively, and maintain a high level of coherence throughout. Choosing between these two is challenging as they both excel in different areas; “Starry Night” for its exploration of emotional depth and existential themes, and “The Persistence of Memory” for its nuanced understanding of surrealism and the critique of temporal reality.</p>
<p>However, if we must crown a winning analysis based on the slight nuances and the challenge of interpreting surrealism’s complex symbolic language, the analysis of Salvador Dalí’s “The Persistence of Memory” is awarded a marginal victory. The student’s ability to navigate Dalí’s complex visual and thematic content, especially considering the abstract nature of surrealism, showcases a slightly higher level of analytical skill and interpretative depth.</p>
<p>Revised Specific Grades:</p>
<p>Vincent van Gogh’s “Starry Night”: 95/100 Salvador Dalí’s “The Persistence of Memory” Analysis: 96/100 (to reflect the marginal victory) Jean-Michel Basquiat’s Untitled Piece Analysis: 93/100</p>
</section>
<section id="ais-best-analysis-dalis-the-persistance-of-memory" class="level2">
<h2 class="anchored" data-anchor-id="ais-best-analysis-dalis-the-persistance-of-memory">AI’s Best Analysis: <em>Dali’s ‘The Persistance of Memory’</em></h2>
<p>In this experiment, the AI-generated analyses of iconic artworks showcased an impressive range of insight and interpretative skills, but I do believe that it probably tapped into its GPT database, where it surely has detailed descriptions regarding these three paintings (maybe a tiny bit less on Basquiat and that’s why the analysis was graded slightly lower?). Dalí’s piece narrowly clinched victory for its nuanced exploration of surrealism. This definitely revealed the AI’s great ability to generate insightful analyses solely from images, accurately identifying and interpreting visual elements, emotional tones, and overarching/underpinning themes of masterpieces of art like “Starry Night” and “The Persistence of Memory” without prior human input on context or significance. Again, it may have put two and two together, but still, I did not tell it what painting it was. Still, very impressed and fascinated again, and wondering why Basquiat’s analysis grade ended up lower.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/manasnarula\.github\.io\/comm4190_S24_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>